# Godzilla

add_library(godzilla
    SHARED
        # factory must be first
        Factory.cpp
        # then units with global variables
        RefMapShapeset1D.cpp
        H1LobattoShapesetEdge.cpp
        H1LobattoShapesetTetra.cpp
        QuadratureGauss1D.cpp
        QuadratureGauss2DTri.cpp
        QuadratureGauss3DTetra.cpp
        QuadratureOutput1D.cpp
        # and then the rest
        App.cpp
        BoundaryCondition.cpp
        CallStack.cpp
        CmdLineArgParser.cpp
        DirichletBC.cpp
        Edge.cpp
        Element.cpp
        Error.cpp
        EssentialBC.cpp
        ExodusIIMesh.cpp
        FELinearProblem.cpp
        FENonlinearProblem.cpp
        FileOutput.cpp
        Forms.cpp
        GYMLFile.cpp
        H1Space.cpp
        Hex.cpp
        ImplicitFENonlinearProblem.cpp
        Init.cpp
        InputParameters.cpp
        LineMesh.cpp
        Logger.cpp
        Mesh.cpp
        MeshFunction1D.cpp
        Object.cpp
        Output.cpp
        ParsedFunctionEvaluator.cpp
        ParsedFunctionInterface.cpp
        PetscMatrix.cpp
        PetscVector.cpp
        PrintInterface.cpp
        Problem.cpp
        Quad.cpp
        RefDomain.cpp
        RefMap1D.cpp
        ShapeFunction1D.cpp
        Shapeset.cpp
        Shapeset1D.cpp
        Shapeset2D.cpp
        Shapeset3D.cpp
        Solution1D.cpp
        Space.cpp
        Terminal.cpp
        Tetra.cpp
        TransientInterface.cpp
        Tri.cpp
        Utils.cpp
        Vertex.cpp
        VTKOutput.cpp
        WeakForm.cpp
)
target_code_coverage(godzilla)
target_sanitization(godzilla)

set_target_properties(
    godzilla
    PROPERTIES
        UNITY_BUILD_MODE BATCH
)

target_include_directories(
    godzilla
    PRIVATE
        ${CONDA_INCLUDE_DIR}
        ${HDF5_INCLUDE_DIR}
        ${JUDY_INCLUDE_DIR}
        ${PETSC_INCLUDE_DIR}
        ${PROJECT_BINARY_DIR}
        ${MUPARSER_INCLUDE_DIR}
        ${YAML_CPP_INCLUDE_DIR}
        ${PROJECT_SOURCE_DIR}/include
        ${PROJECT_SOURCE_DIR}/contrib
)

target_link_libraries(
    godzilla
    PUBLIC
        muparser
        yaml-cpp
        ${BLAS_LIBRARIES}
        ${JUDY_LIBRARY}
        ${HDF5_LIBRARY}
        ${NETCDF_LIBRARY}
        ${EXODUSII_LIBRARY}
        ${PETSC_LIBRARY}
)
